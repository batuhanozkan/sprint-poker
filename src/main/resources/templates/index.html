<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sprint Poker - Planning Poker</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js" onerror="alert('SockJS yÃ¼klenemedi!')"></script>
    <script src="https://cdn.jsdelivr.net/npm/stompjs@2/lib/stomp.min.js" onerror="alert('STOMP yÃ¼klenemedi!')"></script>
</head>
<body>
    <div id="app">
        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen active">
            <div class="container">
                <div class="welcome-card">
                    <h1>ğŸ¯ Sprint Poker</h1>
                    <p class="subtitle">Batuhan Ã–zkan tarafÄ±ndan deÄŸerli Mission Compliance ekibi iÃ§in yapÄ±lan Agile Planning Poker Oyunu</p>
                    
                    <div class="form-group">
                        <input type="text" id="player-name" placeholder="Ä°sminizi girin" maxlength="20">
                    </div>
                    
                    <div class="button-group">
                        <button id="create-room-btn" class="btn btn-primary">Oda OluÅŸtur</button>
                        <button id="join-room-btn" class="btn btn-secondary">Odaya KatÄ±l</button>
                    </div>
                    
                    <div id="join-form" class="join-form hidden">
                        <input type="text" id="room-id-input" placeholder="Oda ID'sini girin">
                        <button id="confirm-join-btn" class="btn btn-primary">KatÄ±l</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen">
            <div class="game-header">
                <div class="room-info">
                    <h2 id="room-name">Oda AdÄ±</h2>
                    <p class="room-id">Oda ID: <span id="room-id-display"></span></p>
                </div>
                <button id="leave-room-btn" class="btn btn-danger">Ã‡Ä±kÄ±ÅŸ</button>
            </div>

            <div class="game-content">
                <div class="left-panel">
                    <div class="story-section">
                        <h3>ğŸ“‹ User Story</h3>
                        <div id="story-display" class="story-display">
                            <p id="story-text">HenÃ¼z story girilmedi...</p>
                        </div>
                        <div id="story-input-section" class="story-input-section hidden">
                            <textarea id="story-input" placeholder="User story'yi buraya yazÄ±n..."></textarea>
                            <button id="set-story-btn" class="btn btn-primary">Story'yi Ayarla</button>
                        </div>
                    </div>

                    <div class="players-section">
                        <h3>ğŸ‘¥ Oyuncular (<span id="player-count">0</span>)</h3>
                        <div id="players-list" class="players-list"></div>
                    </div>
                </div>

                <div class="right-panel">
                    <div class="voting-section">
                        <h3>ğŸƒ KartlarÄ±nÄ±zÄ± SeÃ§in</h3>
                        <div id="cards-container" class="cards-container"></div>
                        <div id="selected-card" class="selected-card hidden">
                            <p>SeÃ§tiÄŸiniz kart: <span id="selected-card-value"></span></p>
                        </div>
                    </div>

                    <div class="actions-section">
                        <button id="reveal-btn" class="btn btn-success hidden">SonuÃ§larÄ± GÃ¶ster</button>
                        <button id="reset-btn" class="btn btn-warning hidden">Yeni Oylama</button>
                    </div>

                    <div id="results-section" class="results-section hidden">
                        <h3>ğŸ“Š SonuÃ§lar</h3>
                        <div id="results-container" class="results-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script th:src="@{/js/app.js}"></script>
    <script>
        // Fallback: EÄŸer app.js yÃ¼klenmezse
        window.addEventListener('load', function() {
            console.log('Sayfa yÃ¼klendi');
            if (typeof createRoom === 'undefined') {
                console.error('createRoom fonksiyonu tanÄ±mlÄ± deÄŸil! JavaScript dosyasÄ± yÃ¼klenmemiÅŸ olabilir.');
                alert('JavaScript dosyasÄ± yÃ¼klenemedi! SayfayÄ± yenileyin.');
            }
        });
    </script>
</body>
</html>
